linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# SPACES CREATION
ggplot(filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'FALSE'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("Platform") +
ggtitle("% of Users who created a space") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 15, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# AUTOMATION FEATURE ADOPTION
ggplot(filter(au,fh_viewed == 'financial_home.tab.viewed'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who adopted spaces automation features") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 15, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# SPACES CREATION
ggplot(filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'FALSE'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who created a space") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 15, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'TRUE')
filter(sp,fh_viewed != 'financial_home.tab.viewed',is_newstandard == 'TRUE')
filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'FALSE')
upgrades <- queryDB("
--upgrades
with users as (
select a.*,
b.subscription_valid_from,
b.subscription_valid_until,
b.enter_reason
from dev.automation_spaces_hub_abtest_10d a
left join dbt.zrh_user_product b
on a.user_created = b.user_created
and enter_reason = 'UPGRADED'
and b.subscription_valid_from > enter_ts
order by user_created, subscription_valid_from
)
select groups,
fh_viewed,
user_type,
count(distinct case when enter_reason is not null then user_created end) as n_users,
count(distinct user_created) as tot_users,
round(n_users::float/tot_users,4) as perc
from users
where is_premium is false -- standard at the time of login and entering the experiment
group by 1,2,3
order by 1,2,3
","redshift-eu")
save(sample_size,
group_size,
spaces,
automation,
upgrades,
file = file.path("automation_hub_abtest.RData"))
fh <- filter(au,fh_viewed == 'financial_home.tab.viewed')
fh <- fh[,c(3,4,5)]
exp <- unique(fh$user_type)
for (i in exp) {
test = filter(fh,user_type == i)
print(unique(test$user_type))
print(as.matrix(test[,2:3]))
results = prop.test(as.matrix(test[,2:3]))
print(results)
}
up <- as.data.frame(upgrades)
up
filter(up,fh_viewed == 'financial_home.tab.viewed')
fh <- filter(up,fh_viewed == 'financial_home.tab.viewed')
fh <- fh[,c(3,4,5)]
exp <- unique(fh$user_type)
for (i in exp) {
test = filter(fh,user_type == i)
print(unique(test$user_type))
print(as.matrix(test[,2:3]))
results = prop.test(as.matrix(test[,2:3]))
print(results)
}
# AUTOMATION FEATURE ADOPTION
ggplot(filter(au,fh_viewed == 'financial_home.tab.viewed'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who adopted spaces automation features") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 15, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# SPACES CREATION
ggplot(filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'FALSE'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who created a space") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 15, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# UPGRADES
ggplot(filter(up,fh_viewed == 'financial_home.tab.viewed'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who Upgraded") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 15, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
fh
up
sp
filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'FALSE')
# UPGRADES
ggplot(filter(up,fh_viewed == 'financial_home.tab.viewed'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who Upgraded") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 18, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# AUTOMATION FEATURE ADOPTION
ggplot(filter(au,fh_viewed == 'financial_home.tab.viewed'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who adopted spaces automation features") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 18, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# SPACES CREATION
ggplot(filter(sp,fh_viewed == 'financial_home.tab.viewed',is_newstandard == 'FALSE'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who created a space") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 18, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
# UPGRADES
ggplot(filter(up,fh_viewed == 'financial_home.tab.viewed'), aes(fill=groups, y=perc, x=as.factor(user_type))) +
geom_bar(stat="identity",position="dodge") +
scale_y_continuous(labels=scales::percent) +
ylab("% Users") + xlab("User Type") +
ggtitle("% of Users who Upgraded") +
#facet_grid(cluster_new ~ .,scales = "free") +
geom_text(aes(label=perc*100), position = position_dodge(0.9),
#vjust=1.6,
#vjust=0.1,
color="black",
size=5.5,face="bold"
) +
theme(axis.text.x = element_text(face = "bold", #color = "#993333",
size = 18, #angle = 45
),
axis.text.y = element_text(face = "bold", #color = "blue",
size = 15, angle = 45
),
axis.title.y = element_text(face = "bold", #color = "blue",
size = 16, #angle = 45
),
strip.background = element_rect(
color="black",
#fill=values,
size=1.5,
linetype="solid"),
strip.text.y = element_text(
size = 16,
#color = "red",
face = "bold"
),
strip.text.x = element_text(
size = 16,
#color = "red",
face = "bold"
)
) +
scale_fill_manual(values = color, #color[9:14],
name = "Exp. Group",
labels = c("Control","Test-Automation Hub")
)
library(bayesAB)
install.packages("bayesAB",dep=T)
library(bayesAB)
A_binom <- rbinom(250, 1, .25)
B_binom <- rbinom(250, 1, .2)
A_binom
table(A_binom)
82/168
?rbinom()
?rbinom()
A_pois <- rpois(250, 6.5)
B_pois <- rpois(250, 5.5)
A_pois
summary(A_pois)
summary(B_pois)
